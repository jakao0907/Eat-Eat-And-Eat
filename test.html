<!DOCTYPE html>
<html>


<head>
<meta charset="utf-8" />
<title>動態增加元素</title>


<style type="text/css">

.son {
width: 100px;
background: palegreen;
float: left;
margin-left: 10px;
margin-bottom: 10px;
text-align: center;
font: bold 15px/100px "微軟雅黑";
border-radius: 5px;
}

#parent {
width: 560px;
border: 1px solid #999;
margin: 0 auto;
overflow: hidden;
border-radius: 5px;
padding-top: 10px;
}

.btn {
width: 560px;
height: 30px;
margin: 0 auto;
border: 1px solid skyblue;
border-radius: 5px;
text-align: center;
}
.btn input {
margin: 0 20px;
height: 25px;
margin-top: 2px;
}

</style>


<script type="text/javascript">

var stus = ["甲","乙","丙","丁","趙","錢","孫","李"];

window.onload = function() {
// 通過js, 在頁面建立5個div


var pdiv = document.getElementById("parent");

for(var i = 0; i < stus.length; i++) {
var dObj = document.createElement("div");
dObj.innerHTML = stus[i];

dObj.className = "son";


pdiv.appendChild(dObj);
}

}

// 宣告一個全域性變數, 記錄當前誰被選中了
var name = "";

function start (obj) {
t = setInterval("choice()", 50);

// 當開始抽獎時, 應該將抽獎按鈕 置為不可用,防止使用者多次點選
obj.disabled = true;

}

function end () {
if(name == "") {
alert("能先點開始不?");
} else {
clearInterval(t);
alert("恭喜你 " + name + ",你獲得了本次活動的特等獎,獎品為");
// 結束時,讓開始按鈕  可用
document.getElementById("startBtn").disabled = false;
}
}

function choice () {
// 產生一個從0  到 陣列長度 -1 範圍的隨機數: [0, stus.length-1]
var idx = Math.floor(Math.random() * stus.length);

var divs = document.getElementsByClassName("son");

// console.log("當前的索引是:" + idx);

for(var i = 0; i < divs.length; i++) {
if(i == idx) {
divs[idx].style.background = "red";

// 以下程式碼 2 句的意思相同: 都是記錄當前的學生名字
name = divs[idx].innerHTML;
//name = stus[idx];
} else {
divs[i].style.background = "palegreen";
}
}

}

</script>


</head>


<body>

<div class="btn">
<!-- this: 這一個, 介面操作誰, this就指代誰 -->
<input type="button" value="開始抽獎" id="startBtn" onclick="start(this)"/>
<input type="button" value="結束抽獎" onclick="end()" />
</div>


<div id="parent">

</div>

</body>


</html> 